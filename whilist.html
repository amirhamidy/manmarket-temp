<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لیست علاقه‌مندی‌ها - خفن!</title>
    <link rel="stylesheet" href="assets/css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Vazirmatn Font -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />

    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">

    <!-- Optional: Bootstrap CSS (if needed for grid/tooltips outside this component) -->
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css"> -->

    <style>
        /* --- Base Variables (Mostly unchanged, maybe slight adjustments) --- */
        :root {
            --w-sc-primary-accent: #f96747;
            --w-sc-primary-accent-darker: #e05230;
            --w-sc-primary-accent-lighter: #fdebe7;
            --w-sc-primary-accent-rgb: 249, 103, 71;

            --w-sc-secondary-accent: #4a90e2;
            --w-sc-secondary-accent-darker: #357abd;
            --w-sc-secondary-accent-rgb: 74, 144, 226;

            --w-sc-danger-color: #e74c3c;
            --w-sc-danger-color-darker: #c0392b;
            --w-sc-danger-color-lighter: #fbeae7;
            --w-sc-danger-rgb: 231, 76, 60;

            --w-sc-success-color: #27ae60;
            --w-sc-warning-color: #f39c12;
            --w-sc-info-color: var(--w-sc-secondary-accent);

            --w-sc-text-primary: #2c3e50;
            --w-sc-text-secondary: #7f8c8d;
            --w-sc-text-muted: #95a5a6;
            --w-sc-text-disabled: #bdc3c7;
            --w-sc-text-on-primary: #ffffff;

            --w-sc-border-color: #dee2e6; /* Slightly darker border */
            --w-sc-border-color-light: #ecf0f1;
            --w-sc-background-light: #f4f6f9;
            --w-sc-background-white: #ffffff;
            --w-sc-background-white-rgb: 255, 255, 255; /* Added for rgba */


            --w-sc-font-family: 'Vazirmatn', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            --w-sc-font-size-base: 1rem; /* 16px */
            --w-sc-font-size-sm: 0.875rem; /* 14px */
            --w-sc-font-size-xs: 0.75rem; /* 12px */
            --w-sc-font-size-lg: 1.25rem;
            --w-sc-font-size-xl: 1.75rem;

            --w-sc-border-radius-sm: 5px;
            --w-sc-border-radius-md: 10px;
            --w-sc-border-radius-lg: 15px;

            --w-sc-shadow-sm: 0 3px 6px rgba(44, 62, 80, 0.05); /* Adjusted shadow color */
            --w-sc-shadow-md: 0 6px 15px rgba(44, 62, 80, 0.08);
            --w-sc-shadow-lg: 0 10px 25px rgba(44, 62, 80, 0.12);

            --w-sc-spacing-unit: 1rem;
            --w-sc-transition-speed: 0.25s;
            --w-sc-transition-fast: 0.15s;
        }

        /* --- General Styles --- */
        *, *::before, *::after { box-sizing: border-box; }
        body {
            font-family: var(--w-sc-font-family);
            background-color: var(--w-sc-background-light);
            color: var(--w-sc-text-primary);
            font-size: var(--w-sc-font-size-base);
            line-height: 1.7;
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Added style for when content is loaded */
        body.w-sc-wishlist-loaded .w-sc-wishlist-item {
            opacity: 1;
            transform: translateY(0);
        }

        .w-sc-container { max-width: 1400px; /* Wider for 4 columns */ margin: 0 auto; padding: 0 calc(var(--w-sc-spacing-unit) * 1); }
        .w-sc-my-4 { margin-top: calc(var(--w-sc-spacing-unit) * 2); margin-bottom: calc(var(--w-sc-spacing-unit) * 2); }
        @media (min-width: 992px) { .w-sc-my-4 { margin-top: calc(var(--w-sc-spacing-unit) * 3); margin-bottom: calc(var(--w-sc-spacing-unit) * 3); } }

        a { color: var(--w-sc-secondary-accent); text-decoration: none; transition: color var(--w-sc-transition-speed) ease; }
        a:hover { color: var(--w-sc-secondary-accent-darker); }
        svg { vertical-align: middle; transition: fill var(--w-sc-transition-speed) ease, stroke var(--w-sc-transition-speed) ease; }
        img { max-width: 100%; height: auto; display: block; }

        /* --- Wishlist Page Specific --- */
        .w-sc-wishlist-page { /* Main container class */ }

        /* Header Section */
        .w-sc-wishlist-header-section {
            background-color: var(--w-sc-background-white);
            padding: var(--w-sc-spacing-unit) calc(var(--w-sc-spacing-unit) * 1.5);
            border-radius: var(--w-sc-border-radius-md);
            box-shadow: var(--w-sc-shadow-sm);
            margin-bottom: calc(var(--w-sc-spacing-unit) * 2);
        }
        .w-sc-wishlist-header {
            display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;
            gap: var(--w-sc-spacing-unit);
            border-bottom: 1px solid var(--w-sc-border-color-light);
            padding-bottom: var(--w-sc-spacing-unit); margin-bottom: var(--w-sc-spacing-unit);
        }
        .w-sc-wishlist-title-group { display: flex; align-items: baseline; gap: calc(var(--w-sc-spacing-unit) * 0.5); }
        .w-sc-wishlist-title { font-size: var(--w-sc-font-size-xl); font-weight: 700; margin: 0; color: var(--w-sc-text-primary); }
        .w-sc-wishlist-count { font-size: var(--w-sc-font-size-sm); color: var(--w-sc-text-secondary); font-weight: 500; background-color: var(--w-sc-background-light); padding: 3px 10px; border-radius: var(--w-sc-border-radius-sm); }
        .w-sc-wishlist-actions { display: flex; align-items: center; gap: calc(var(--w-sc-spacing-unit) * 1); }

        /* --- Custom Sort Dropdown --- */
        .w-sc-sort-filter { display: flex; align-items: center; gap: calc(var(--w-sc-spacing-unit) * 0.5); }
        .w-sc-sort-filter label { font-size: var(--w-sc-font-size-sm); color: var(--w-sc-text-secondary); font-weight: 500; white-space: nowrap; margin-left: 4px; }
        .w-sc-custom-select-wrapper {
            position: relative;
            display: inline-block;
        }
        .w-sc-custom-select-wrapper select {
            font-family: inherit; font-size: var(--w-sc-font-size-sm);
            padding: 8px 30px 8px 12px; /* Space for icon */
            border: 1px solid var(--w-sc-border-color);
            border-radius: var(--w-sc-border-radius-md);
            background-color: var(--w-sc-background-white);
            color: var(--w-sc-text-primary);
            cursor: pointer;
            min-width: 140px;
            appearance: none; /* Remove default arrow */
            -webkit-appearance: none;
            -moz-appearance: none;
            transition: border-color var(--w-sc-transition-speed) ease, box-shadow var(--w-sc-transition-speed) ease;
            line-height: 1.5; /* Ensure text aligns well */
        }
        .w-sc-custom-select-wrapper select:hover { border-color: var(--w-sc-primary-accent); }
        .w-sc-custom-select-wrapper select:focus {
            outline: none; border-color: var(--w-sc-primary-accent);
            box-shadow: 0 0 0 3px rgba(var(--w-sc-primary-accent-rgb), 0.2);
        }
        .w-sc-custom-select-wrapper::after { /* Custom Arrow */
            content: '';
            position: absolute;
            top: 50%;
            left: 12px; /* Position left for RTL */
            width: 0; height: 0;
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 6px solid var(--w-sc-text-secondary);
            transform: translateY(-50%);
            pointer-events: none; /* Allow clicks to pass through */
            transition: border-color var(--w-sc-transition-speed) ease;
        }
        .w-sc-custom-select-wrapper:hover::after { border-top-color: var(--w-sc-primary-accent); }

        /* --- Wishlist Content Area --- */
        .w-sc-wishlist-content { position: relative; min-height: 400px; }

        /* --- Empty Wishlist State --- */
        .w-sc-empty-wishlist {
            position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; padding: calc(var(--w-sc-spacing-unit) * 2);
            background-color: rgba(var(--w-sc-background-white-rgb), 0.9); /* Less transparent */
            backdrop-filter: blur(3px); border-radius: var(--w-sc-border-radius-lg);
            opacity: 0; visibility: hidden; transform: scale(0.95);
            transition: opacity var(--w-sc-transition-speed) ease, visibility var(--w-sc-transition-speed) ease, transform var(--w-sc-transition-speed) ease;
            z-index: 10;
        }
        .w-sc-empty-wishlist--visible { opacity: 1; visibility: visible; transform: scale(1); }
        .w-sc-empty-wishlist__icon {
            width: 80px; height: 80px; /* Slightly smaller */
            stroke: var(--w-sc-primary-accent); fill: rgba(var(--w-sc-primary-accent-rgb), 0.1);
            stroke-width: 1.5; margin-bottom: calc(var(--w-sc-spacing-unit) * 1.5);
        }
        .w-sc-empty-wishlist--visible .w-sc-empty-wishlist__icon { animation: w-sc-heartbeat 1.6s ease-in-out infinite; }
        @keyframes w-sc-heartbeat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.08); } }
        .w-sc-empty-wishlist__message { font-size: var(--w-sc-font-size-lg); font-weight: 600; margin-bottom: calc(var(--w-sc-spacing-unit) * 0.5); color: var(--w-sc-text-primary); }
        .w-sc-empty-wishlist__submessage { font-size: var(--w-sc-font-size-base); color: var(--w-sc-text-secondary); margin-bottom: calc(var(--w-sc-spacing-unit) * 1.8); }

        /* --- Items List Grid (4 columns on large screens) --- */
        .w-sc-items-list {
            display: grid; grid-template-columns: 1fr;
            gap: calc(var(--w-sc-spacing-unit) * 1.25); /* Slightly smaller gap */
            list-style: none; padding: 0; margin: 0; position: relative; z-index: 5;
        }
        @media (min-width: 576px) { .w-sc-items-list { grid-template-columns: repeat(2, 1fr); } } /* 2 columns small */
        @media (min-width: 992px) { .w-sc-items-list { grid-template-columns: repeat(3, 1fr); } } /* 3 columns medium */
        @media (min-width: 1200px) { .w-sc-items-list { grid-template-columns: repeat(4, 1fr); } } /* 4 columns large */

        /* --- Wishlist Item & Card --- */
        .w-sc-wishlist-item {
            transition: opacity 0.4s ease-out, transform 0.4s ease-out;
            /* Add subtle load-in animation */
            opacity: 0;
            transform: translateY(20px);
        }
        .w-sc-wishlist-item--removing { opacity: 0; transform: scale(0.9); pointer-events: none; }
        .w-sc-product-card {
            display: flex; flex-direction: column; background-color: var(--w-sc-background-white);
            border: 1px solid var(--w-sc-border-color-light); border-radius: var(--w-sc-border-radius-md); /* Slightly smaller radius */
            overflow: hidden; box-shadow: var(--w-sc-shadow-sm); height: 100%;
            transition: box-shadow var(--w-sc-transition-speed) ease, transform var(--w-sc-transition-speed) ease, border-color var(--w-sc-transition-speed) ease;
        }
        .w-sc-product-card:hover { box-shadow: var(--w-sc-shadow-md); transform: translateY(-4px); border-color: var(--w-sc-border-color); }

        /* Card Image */
        .w-sc-product-card__image-link { display: block; position: relative; background-color: #fdfdfd; padding: calc(var(--w-sc-spacing-unit)*0.75); border-bottom: 1px solid var(--w-sc-border-color-light); }
        .w-sc-product-card__image { display: block; width: 100%; aspect-ratio: 1 / 1; object-fit: contain; margin: 0 auto; }
        .w-sc-product-card__discount-badge {
            position: absolute; top: calc(var(--w-sc-spacing-unit)*0.75); left: calc(var(--w-sc-spacing-unit)*0.75);
            background-color: var(--w-sc-primary-accent); color: var(--w-sc-text-on-primary);
            font-size: var(--w-sc-font-size-xs); padding: 3px 8px; border-radius: var(--w-sc-border-radius-sm);
            font-weight: 700; z-index: 2;
        }

        /* Card Body */
        .w-sc-product-card__body { padding: calc(var(--w-sc-spacing-unit)*0.8); display: flex; flex-direction: column; flex-grow: 1; gap: calc(var(--w-sc-spacing-unit) * 0.6); }
        .w-sc-product-card__title-link { color: var(--w-sc-text-primary); }
        .w-sc-product-card__title-link:hover .w-sc-product-card__title { color: var(--w-sc-primary-accent); }
        .w-sc-product-card__title {
            font-size: 0.9rem; /* Smaller title for 4 columns */ font-weight: 600; line-height: 1.5; margin: 0;
            display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
            overflow: hidden; text-overflow: ellipsis; transition: color var(--w-sc-transition-speed) ease;
            min-height: calc(0.9rem * 1.5 * 2);
        }

        /* Card Meta */
        .w-sc-product-card__meta { display: flex; flex-direction: column; gap: calc(var(--w-sc-spacing-unit) * 0.3); font-size: var(--w-sc-font-size-sm); color: var(--w-sc-text-secondary); }
        .w-sc-product-card__meta span { display: flex; align-items: center; gap: calc(var(--w-sc-spacing-unit) * 0.4); }
        .w-sc-product-card__meta svg { flex-shrink: 0; width: 14px; height: 14px; stroke-width: 2; color: var(--w-sc-text-muted); }
        .w-sc-product-card__rating { display: flex; align-items: center; gap: calc(var(--w-sc-spacing-unit) * 0.25); font-size: var(--w-sc-font-size-sm); color: var(--w-sc-text-secondary); }
        .w-sc-product-card__rating svg.w-sc-icon-star { width: 16px; height: 16px; color: #ffc107; fill: #ffc107; stroke: none; } /* Specific size for star */
        .w-sc-product-card__rating-value { font-weight: 700; color: var(--w-sc-text-primary); margin-left: 3px; margin-right: 1px; }

        /* Availability */
        .w-sc-product-card__availability { font-size: var(--w-sc-font-size-xs); font-weight: 500; padding: 3px 8px; border-radius: var(--w-sc-border-radius-sm); display: inline-block; }
        .w-sc-product-card__availability--in-stock { color: var(--w-sc-success-color); background-color: rgba(39, 174, 96, 0.1); }
        .w-sc-product-card__availability--low-stock { color: var(--w-sc-warning-color); background-color: rgba(243, 156, 18, 0.1); }
        .w-sc-product-card__availability--out-of-stock { color: var(--w-sc-danger-color); background-color: var(--w-sc-danger-color-lighter); }
        .w-sc-product-card--out-of-stock .w-sc-product-card__body, .w-sc-product-card--out-of-stock .w-sc-product-card__image-link { opacity: 0.7; }

        /* Card Footer */
        .w-sc-product-card__footer {
            padding: 0 calc(var(--w-sc-spacing-unit)*0.8) calc(var(--w-sc-spacing-unit)*0.8);
            margin-top: auto; display: flex; flex-direction: column; gap: calc(var(--w-sc-spacing-unit) * 0.6);
            border-top: 1px solid var(--w-sc-border-color-light); padding-top: calc(var(--w-sc-spacing-unit)*0.8);
        }
        .w-sc-product-card__pricing { display: flex; flex-direction: column; align-items: flex-start; gap: 2px; }
        .w-sc-product-card__original-price { font-size: var(--w-sc-font-size-sm); color: var(--w-sc-text-muted); text-decoration: line-through; margin-top: -5px; }
        .w-sc-product-card__price { font-size: 1.1rem; font-weight: 700; color: var(--w-sc-text-primary); line-height: 1.2; }
        .w-sc-product-card__price--unavailable { font-size: 1rem; font-weight: 500; color: var(--w-sc-danger-color); }
        .w-sc-product-card__currency { font-size: var(--w-sc-font-size-xs); color: var(--w-sc-text-primary); margin-right: 3px; font-weight: 500; }
        .w-sc-product-card__buttons { display: flex; gap: calc(var(--w-sc-spacing-unit) * 0.5); width: 100%; }

        /* --- Button Component --- */
        .w-sc-button {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 8px 14px; /* Adjusted padding for smaller cards */ font-size: var(--w-sc-font-size-sm); font-weight: 600;
            text-align: center; border-radius: var(--w-sc-border-radius-md); border: 1px solid transparent;
            cursor: pointer; user-select: none; transition: all var(--w-sc-transition-fast) ease-in-out; white-space: nowrap;
        }
        .w-sc-button:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(var(--w-sc-primary-accent-rgb), 0.3); }
        .w-sc-button:active:not(:disabled) { transform: scale(0.96); }
        .w-sc-button:disabled, .w-sc-button[disabled] { opacity: 0.5; cursor: not-allowed; box-shadow: none; transform: none; }
        /* Button Icon Styling */
        .w-sc-button svg:not(.w-sc-loading-spinner) { margin-left: 8px; width: 16px; height: 16px; } /* Space before text */
        /* Primary Button */
        .w-sc-button--primary { background-color: var(--w-sc-primary-accent); color: var(--w-sc-text-on-primary); border-color: var(--w-sc-primary-accent); }
        .w-sc-button--primary:hover:not(:disabled) { background-color: var(--w-sc-primary-accent-darker); border-color: var(--w-sc-primary-accent-darker); color: var(--w-sc-text-on-primary); transform: translateY(-1px); box-shadow: 0 4px 8px rgba(var(--w-sc-primary-accent-rgb), 0.2); }
        /* Secondary Button */
        .w-sc-button--secondary { background-color: transparent; color: var(--w-sc-secondary-accent); border-color: var(--w-sc-secondary-accent); }
        .w-sc-button--secondary:hover:not(:disabled) { background-color: rgba(var(--w-sc-secondary-accent-rgb), 0.08); color: var(--w-sc-secondary-accent-darker); border-color: var(--w-sc-secondary-accent-darker); }
        /* Danger Outline Button */
        .w-sc-button--danger-outline { background-color: transparent; color: var(--w-sc-danger-color); border-color: var(--w-sc-danger-color-lighter); }
        .w-sc-button--danger-outline:hover:not(:disabled) { background-color: var(--w-sc-danger-color-lighter); color: var(--w-sc-danger-color-darker); }
        /* Icon Button */
        .w-sc-button--icon { padding: 8px; line-height: 1; flex-shrink: 0; }
        .w-sc-button--icon svg { margin: 0; width: 18px; height: 18px; }
        /* Specific Buttons */
        .w-sc-add-to-cart-btn { flex-grow: 1; }
        .w-sc-product-card--out-of-stock .w-sc-add-to-cart-btn { display: none; }
        .w-sc-product-card--out-of-stock .w-sc-notify-btn {
            flex-grow: 1; background-color: transparent; color: var(--w-sc-secondary-accent); border-color: var(--w-sc-secondary-accent);
        }
        .w-sc-product-card--out-of-stock .w-sc-notify-btn:hover:not(:disabled) { background-color: rgba(var(--w-sc-secondary-accent-rgb), 0.08); color: var(--w-sc-secondary-accent-darker); }
        /* Loading Spinner */
        @keyframes w-sc-spinner-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .w-sc-loading-spinner { animation: w-sc-spinner-spin 0.8s linear infinite; }

        /* --- Responsiveness --- */
        @media (max-width: 991px) { /* Tablet */
            .w-sc-wishlist-actions { width: 100%; justify-content: flex-end; }
        }
        @media (max-width: 767px) { /* Mobile */
            .w-sc-wishlist-header { flex-direction: column; align-items: flex-start; }
            .w-sc-wishlist-actions { width: 100%; flex-direction: column; align-items: stretch; gap: calc(var(--w-sc-spacing-unit)*0.75); }
            .w-sc-sort-filter { justify-content: space-between; }
            .w-sc-custom-select-wrapper select { flex-grow: 1; min-width: 150px; }
            .w-sc-button { padding: 8px 14px; }
            .w-sc-button--icon { padding: 8px; }
            .w-sc-wishlist-title { font-size: 1.5rem; }
        }
        /* No 1-column force on mobile, let grid handle it (min 2 columns if space) */

    </style>
</head>
<body class="w-sc-wishlist-page">

<!-- Placeholder for Header -->
<header style="background-color: #eee; padding: 1rem; text-align: center; margin-bottom: 1rem;">
    [محل قرارگیری هدر سایت]
</header>

<main class="w-sc-wishlist-container w-sc-container w-sc-my-4">

    <!-- Wishlist Header Section -->
    <section class="w-sc-wishlist-header-section">
        <div class="w-sc-wishlist-header">
            <div class="w-sc-wishlist-title-group">
                <h1 class="w-sc-wishlist-title">لیست علاقه‌مندی‌ها</h1>
                <span class="w-sc-wishlist-count">(<span id="w-sc-wishlist-item-count">3</span> کالا)</span>
            </div>
            <div class="w-sc-wishlist-actions">
                <!-- Custom Sorting Dropdown -->
                <div class="w-sc-sort-filter">
                    <label for="w-sc-sort-select">مرتب‌سازی:</label>
                    <div class="w-sc-custom-select-wrapper">
                        <select id="w-sc-sort-select" name="sort">
                            <option value="newest">جدیدترین</option>
                            <option value="price_asc">ارزان‌ترین</option>
                            <option value="price_desc">گران‌ترین</option>
                            <option value="most_visited">پیش‌فرض</option> <!-- Changed label -->
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Wishlist Content Grid -->
    <section class="w-sc-wishlist-content" aria-label="لیست محصولات مورد علاقه">

        <!-- Empty Wishlist State -->
        <div id="w-sc-empty-wishlist" class="w-sc-empty-wishlist">
            <!-- SVG Heart Icon -->
            <svg class="w-sc-empty-wishlist__icon" viewBox="0 0 24 24"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
            <p class="w-sc-empty-wishlist__message">لیست علاقه‌مندی شما خالی است.</p>
            <p class="w-sc-empty-wishlist__submessage">محصولات شگفت‌انگیز منتظر شما هستند!</p>
            <a href="/shop" class="w-sc-button w-sc-button--primary w-sc-empty-wishlist__action">
                <!-- SVG Shop Icon -->
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                رفتن به فروشگاه
            </a>
        </div>

        <!-- Wishlist Items Grid -->
        <ul id="w-sc-items-list" class="w-sc-items-list">
            <!-- Item 1: Add data-price and data-added-date -->
            <li class="w-sc-wishlist-item" data-id="product-123" data-price="62500000" data-added-date="2024-03-01">
                <article class="w-sc-product-card">
                    <a href="single.product.html" class="w-sc-product-card__image-link">
                        <img src="assets/img/product/apple-watch-1.png" alt="گوشی موبایل اپل آیفون ۱۵ پرو مکس" class="w-sc-product-card__image">
                    </a>
                    <div class="w-sc-product-card__body">
                        <a href="single.product.html" class="w-sc-product-card__title-link">
                            <h2 class="w-sc-product-card__title">گوشی موبایل اپل مدل iPhone 15 Pro Max ظرفیت 256 گیگابایت</h2>
                        </a>
                        <div class="w-sc-product-card__rating">
                            <!-- SVG Star Icon -->
                            <svg class="w-sc-icon-star" viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                            <span class="w-sc-product-card__rating-value">۴.۵</span>
                            <span class="w-sc-product-card__rating-count">(۱۲۰)</span>
                        </div>
                        <div class="w-sc-product-card__meta">
                                <span class="w-sc-product-card__seller">
                                     <!-- SVG Location Icon -->
                                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                     فروشنده: فروشگاه رسمی
                                </span>
                            <span class="w-sc-product-card__added-date">
                                    <!-- SVG Calendar Icon -->
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                    اضافه شده در: ۱۴۰۲/۱۲/۱۱ <!-- Display date -->
                                </span>
                        </div>
                        <div class="w-sc-product-card__availability w-sc-product-card__availability--in-stock">
                            موجود
                        </div>
                    </div>
                    <div class="w-sc-product-card__footer">
                        <div class="w-sc-product-card__pricing">
                            <span class="w-sc-product-card__price">۶۲٬۵۰۰٬۰۰۰</span>
                            <span class="w-sc-product-card__currency">تومان</span>
                        </div>
                        <div class="w-sc-product-card__buttons">
                            <button type="button" class="w-sc-button w-sc-button--danger-outline w-sc-button--icon w-sc-remove-wishlist-btn" aria-label="حذف از لیست علاقه‌مندی" data-product-id="product-123" title="حذف">
                                <!-- SVG Trash Icon -->
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            </button>
                            <button type="button" class="w-sc-button w-sc-button--primary w-sc-add-to-cart-btn" data-product-id="product-123">
                                <!-- SVG Cart Icon -->
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                                افزودن به سبد
                            </button>
                        </div>
                    </div>
                </article>
            </li>

            <!-- Item 2: Add data-price and data-added-date -->
            <li class="w-sc-wishlist-item" data-id="product-456" data-price="34800000" data-added-date="2024-02-09">
                <article class="w-sc-product-card">
                    <a href="single.product.html" class="w-sc-product-card__image-link">
                        <img src="assets/img/product/apple-watch-1.png" alt="لپ تاپ لنوو آیدیاپد گیمینگ ۳" class="w-sc-product-card__image">
                    </a>
                    <div class="w-sc-product-card__body">
                        <a href="single.product.html" class="w-sc-product-card__title-link">
                            <h2 class="w-sc-product-card__title">لپ تاپ 15.6 اینچی لنوو مدل IdeaPad Gaming 3 15IAH7</h2>
                        </a>
                        <div class="w-sc-product-card__rating">
                            <svg class="w-sc-icon-star" viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                            <span class="w-sc-product-card__rating-value">۴.۲</span>
                            <span class="w-sc-product-card__rating-count">(۷۵)</span>
                        </div>
                        <div class="w-sc-product-card__meta">
                                 <span class="w-sc-product-card__seller">
                                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                      فروشنده: تامین کننده دوم
                                 </span>
                            <span class="w-sc-product-card__added-date">
                                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                      اضافه شده در: ۱۴۰۲/۱۱/۲۰
                                  </span>
                        </div>
                        <div class="w-sc-product-card__availability w-sc-product-card__availability--low-stock">
                            ۲ عدد در انبار
                        </div>
                    </div>
                    <div class="w-sc-product-card__footer">
                        <div class="w-sc-product-card__pricing">
                            <span class="w-sc-product-card__price">۳۴٬۸۰۰٬۰۰۰</span>
                            <span class="w-sc-product-card__currency">تومان</span>
                        </div>
                        <div class="w-sc-product-card__buttons">
                            <button type="button" class="w-sc-button w-sc-button--danger-outline w-sc-button--icon w-sc-remove-wishlist-btn" aria-label="حذف از لیست علاقه‌مندی" data-product-id="product-456" title="حذف">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            </button>
                            <button type="button" class="w-sc-button w-sc-button--primary w-sc-add-to-cart-btn" data-product-id="product-456">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                                افزودن به سبد
                            </button>
                        </div>
                    </div>
                </article>
            </li>

            <!-- Item 3 - Out of Stock: Add data-price and data-added-date -->
            <li class="w-sc-wishlist-item w-sc-product-card--out-of-stock" data-id="product-789" data-price="15000000" data-added-date="2024-01-01"> <!-- Assuming a price even if unavailable -->
                <article class="w-sc-product-card">
                    <a href="single.product.html" class="w-sc-product-card__image-link">
                        <img src="https://dkstatics-public.digikala.com/digikala-products/e505e9481c567d5d72d754442c80f1ba263c68a6_1694092324.jpg?x-oss-process=image/resize,m_lfit,h_800,w_800/format,webp/quality,q_90" alt="هدفون بی‌سیم سونی WH-1000XM5" class="w-sc-product-card__image">
                    </a>
                    <div class="w-sc-product-card__body">
                        <a href="single.product.html" class="w-sc-product-card__title-link">
                            <h2 class="w-sc-product-card__title">هدفون بی‌سیم سونی مدل WH-1000XM5</h2>
                        </a>
                        <div class="w-sc-product-card__rating">
                            <svg class="w-sc-icon-star" viewBox="0 0 24 24"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
                            <span class="w-sc-product-card__rating-value">۴.۸</span>
                            <span class="w-sc-product-card__rating-count">(۳۱۰)</span>
                        </div>
                        <div class="w-sc-product-card__meta">
                                 <span class="w-sc-product-card__seller">
                                      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
                                      فروشنده: من مارکت
                                 </span>
                            <span class="w-sc-product-card__added-date">
                                     <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                                     اضافه شده در: ۱۴۰۲/۱۰/۱۱
                                  </span>
                        </div>
                        <div class="w-sc-product-card__availability w-sc-product-card__availability--out-of-stock">
                            ناموجود
                        </div>
                    </div>
                    <div class="w-sc-product-card__footer">
                        <div class="w-sc-product-card__pricing">
                            <span class="w-sc-product-card__price w-sc-product-card__price--unavailable">ناموجود</span>
                        </div>
                        <div class="w-sc-product-card__buttons">
                            <button type="button" class="w-sc-button w-sc-button--danger-outline w-sc-button--icon w-sc-remove-wishlist-btn" aria-label="حذف از لیست علاقه‌مندی" data-product-id="product-789" title="حذف">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>
                            </button>
                            <button type="button" class="w-sc-button w-sc-notify-btn" data-product-id="product-789">
                                <!-- SVG Bell Icon -->
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                                موجود شد خبرم کن
                            </button>
                        </div>
                    </div>
                </article>
            </li>
            <!-- Add more items... -->

        </ul>

    </section>
</main>

<!-- Placeholder for Footer -->
<footer style="background-color: #eee; padding: 1rem; text-align: center; margin-top: 1rem;">
    [محل قرارگیری فوتر سایت]
</footer>

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

<!-- Optional: Bootstrap JS Bundle (Needed for Tooltips - uncomment if needed) -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> -->

<script>
    document.addEventListener('DOMContentLoaded', () => {

        const wishlistItemsList = document.getElementById('w-sc-items-list');
        const emptyWishlistMessage = document.getElementById('w-sc-empty-wishlist');
        const wishlistItemCountEl = document.getElementById('w-sc-wishlist-item-count');
        const sortSelect = document.getElementById('w-sc-sort-select');

        const REMOVING_CLASS = 'w-sc-wishlist-item--removing';
        const EMPTY_VISIBLE_CLASS = 'w-sc-empty-wishlist--visible';

        // --- Initialize Tooltips (Optional) ---
        function initializeTooltips() { /* ... (same as before) ... */ }

        // --- Update Item Count Display ---
        function updateWishlistCount() {
            if (!wishlistItemCountEl || !wishlistItemsList) return;
            const currentItems = wishlistItemsList.querySelectorAll(`.w-sc-wishlist-item:not(.${REMOVING_CLASS})`);
            wishlistItemCountEl.textContent = currentItems.length;
        }

        // --- Check and Show/Hide Empty State ---
        function checkEmptyState() {
            if (!wishlistItemsList || !emptyWishlistMessage) return;
            // Use setTimeout to defer check slightly, ensures DOM is updated after removal/sort
            setTimeout(() => {
                const hasItems = wishlistItemsList.querySelector(`.w-sc-wishlist-item:not(.${REMOVING_CLASS})`);
                if (hasItems) {
                    emptyWishlistMessage.classList.remove(EMPTY_VISIBLE_CLASS);
                } else {
                    emptyWishlistMessage.classList.add(EMPTY_VISIBLE_CLASS);
                }
            }, 50); // Short delay
        }

        // --- Sort Wishlist Items ---
        function sortWishlistItems(sortBy) {
            if (!wishlistItemsList) return;
            const items = Array.from(wishlistItemsList.querySelectorAll('.w-sc-wishlist-item:not(.w-sc-wishlist-item--removing)'));

            items.sort((a, b) => {
                const priceA = parseFloat(a.dataset.price) || 0;
                const priceB = parseFloat(b.dataset.price) || 0;
                const dateA = a.dataset.addedDate || '0';
                const dateB = b.dataset.addedDate || '0';
                const idA = a.dataset.id || ''; // Use for default/most_visited
                const idB = b.dataset.id || '';

                switch (sortBy) {
                    case 'price_asc':
                        return priceA - priceB;
                    case 'price_desc':
                        return priceB - priceA;
                    case 'newest':
                        // Compare dates as strings (YYYY-MM-DD format ensures correct comparison)
                        if (dateA < dateB) return 1;
                        if (dateA > dateB) return -1;
                        return 0;
                    case 'most_visited': // Default sort (e.g., by ID or initial order)
                    default:
                        // Simple comparison assuming IDs are somewhat sequential or unique
                        if (idA < idB) return -1;
                        if (idA > idB) return 1;
                        return 0;
                }
            });

            // Re-append items in sorted order
            items.forEach(item => wishlistItemsList.appendChild(item));
        }

        // --- Handle Remove Button Click ---
        if (wishlistItemsList) {
            wishlistItemsList.addEventListener('click', (event) => {
                const removeButton = event.target.closest('.w-sc-remove-wishlist-btn');
                if (!removeButton || removeButton.disabled) return;

                const wishlistItem = removeButton.closest('.w-sc-wishlist-item');
                if (!wishlistItem || wishlistItem.classList.contains(REMOVING_CLASS)) return;

                const productId = wishlistItem.dataset.id || removeButton.dataset.productId;
                const productTitle = wishlistItem.querySelector('.w-sc-product-card__title')?.textContent.trim() || 'این محصول';

                // --- Confirmation using SweetAlert2 ---
                Swal.fire({
                    title: 'حذف از علاقه‌مندی‌ها',
                    text: `آیا از حذف "${productTitle}" مطمئن هستید؟`,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: 'var(--w-sc-primary-accent)', // Use theme color
                    cancelButtonColor: 'var(--w-sc-text-secondary)',
                    confirmButtonText: 'بله، حذف کن',
                    cancelButtonText: 'انصراف',
                    customClass: { // Ensure Vazir font is applied
                        popup: 'swal2-vazirfont',
                        confirmButton: 'swal2-vazirfont',
                        cancelButton: 'swal2-vazirfont',
                        title: 'swal2-vazirfont',
                        htmlContainer: 'swal2-vazirfont'
                    }
                }).then((result) => {
                    if (result.isConfirmed) {
                        console.log(`Confirmed removal for product ${productId}...`);
                        // --- Simulate Removal ---
                        wishlistItem.classList.add(REMOVING_CLASS);
                        updateWishlistCount();

                        let transitionEnded = false;
                        function handleTransitionEnd(e) {
                            if ((e.propertyName === 'opacity' || e.propertyName === 'transform') && !transitionEnded) {
                                transitionEnded = true;
                                wishlistItem.removeEventListener('transitionend', handleTransitionEnd);
                                clearTimeout(fallbackTimeout);
                                if (document.body.contains(wishlistItem)) { wishlistItem.remove(); }
                                checkEmptyState(); // Check after removal
                            }
                        }
                        wishlistItem.addEventListener('transitionend', handleTransitionEnd);

                        const fallbackTimeout = setTimeout(() => {
                            if (!transitionEnded && document.body.contains(wishlistItem)) {
                                console.warn(`Transitionend fallback triggered for item ${productId}.`);
                                wishlistItem.removeEventListener('transitionend', handleTransitionEnd);
                                wishlistItem.remove();
                                checkEmptyState();
                            }
                        }, 550);

                        // --- TODO: Add actual API call here ---
                        Swal.fire({ // Show success message after UI update starts
                            title: 'حذف شد!',
                            text: `"${productTitle}" با موفقیت از لیست شما حذف شد.`,
                            icon: 'success',
                            timer: 1500, // Auto close after 1.5s
                            showConfirmButton: false,
                            customClass: { popup: 'swal2-vazirfont', title: 'swal2-vazirfont', htmlContainer: 'swal2-vazirfont' }
                        });
                    }
                });
            });
        }

        // --- Placeholder for other interactions ---
        if (wishlistItemsList) {
            wishlistItemsList.addEventListener('click', (event) => {
                const addToCartButton = event.target.closest('.w-sc-add-to-cart-btn');
                const notifyButton = event.target.closest('.w-sc-notify-btn');

                if (addToCartButton && !addToCartButton.disabled) {
                    const productId = addToCartButton.dataset.productId;
                    const productTitle = addToCartButton.closest('.w-sc-product-card')?.querySelector('.w-sc-product-card__title')?.textContent.trim() || 'محصول';
                    console.log(`Adding product ${productId} to cart...`);

                    addToCartButton.innerHTML = `<svg class="w-sc-loading-spinner" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"></path></svg>`;
                    addToCartButton.disabled = true;

                    setTimeout(() => {
                        addToCartButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`;
                        Swal.fire({
                            icon: 'success',
                            title: 'به سبد خرید اضافه شد!',
                            text: `"${productTitle}" به سبد خرید شما اضافه شد.`,
                            timer: 2000,
                            showConfirmButton: false,
                            customClass: { popup: 'swal2-vazirfont', title: 'swal2-vazirfont', htmlContainer: 'swal2-vazirfont' }
                        });
                        // Re-enable button after a delay if needed, or handle server response
                        // setTimeout(() => {
                        //    addToCartButton.innerHTML = `...افزودن به سبد`;
                        //    addToCartButton.disabled = false;
                        // }, 2500);
                    }, 1200);
                }

                if (notifyButton && !notifyButton.disabled) {
                    const productId = notifyButton.dataset.productId;
                    const productTitle = notifyButton.closest('.w-sc-product-card')?.querySelector('.w-sc-product-card__title')?.textContent.trim() || 'محصول';
                    console.log(`Registering notification for product ${productId}...`);
                    Swal.fire({
                        icon: 'info',
                        title: 'درخواست شما ثبت شد',
                        text: `به محض موجود شدن "${productTitle}" به شما اطلاع خواهیم داد.`,
                        confirmButtonText: 'باشه',
                        confirmButtonColor: 'var(--w-sc-secondary-accent)',
                        customClass: { popup: 'swal2-vazirfont', confirmButton: 'swal2-vazirfont', title: 'swal2-vazirfont', htmlContainer: 'swal2-vazirfont' }
                    });
                    notifyButton.textContent = 'درخواست ثبت شد';
                    notifyButton.disabled = true;
                }
            });
        }

        // --- Event Listener for Sort Dropdown ---
        if (sortSelect) {
            sortSelect.addEventListener('change', (event) => {
                sortWishlistItems(event.target.value);
            });
        }

        // --- Initial Setup ---
        initializeTooltips();
        updateWishlistCount();
        checkEmptyState();
        // Initial subtle load animation trigger
        setTimeout(() => {
            document.body.classList.add('w-sc-wishlist-loaded');
        }, 50);

    });
</script>

<!-- CSS for SweetAlert Font -->
<style>
    .swal2-vazirfont {
        font-family: 'Vazirmatn', sans-serif !important;
    }
</style>

</body>
</html>